<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Naser's Tech Blogs</title>

  <link rel="shortcut icon" href="../images/title-logo.ico" />
  <link rel="stylesheet" href="../css/styles.css" type="text/css" />
  <link href="../css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js"></script>
</head>

<body class="page-docs">
  <nav>
    <div class="nav-content">
      <div class="nav-left">
        <img class="nav-logo" src="../images/title-logo.ico" alt="mn-LAB Logo" />
        <h1>Md Abdullah Al Naser's Tech Blogs</h1>
      </div>

      <a class="home-button" href="https://naserbd.github.io/">Home</a>
    </div>
  </nav>

  <aside class="side-bar-area">
    <div class="side-bar-area-content">
      <img src="../images/ai-ml-card-2.png" alt="AI/ML Course" />

      <ul class="side-bar-menu" id="sidebarMenu">
        <li class="expandable expanded">
          <a href="#" class="section-title">AI/ML নিয়ে বেসিক কথা-বার্তা</a>
          <ul>
            <li>
              <a href="#" data-md="01-al-ml.md">
                কেন Network Engineer-দের AI/ML বোঝা জরুরি?
              </a>
            </li>
            <!-- Optional extra page -->
            <!-- <li><a href="#" data-md="test.md">Test Page</a></li> -->
          </ul>
        </li>
      </ul>
    </div>
  </aside>

  <main class="tutorial-area" id="contentArea">
    <h1>Loading...</h1>
  </main>

  <footer class="footer">
    <p>&copy; 2024 Md Abdullah Al Naser's Tech Blogs</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (typeof showdown === "undefined") {
        console.error("Showdown library is not loaded correctly.");
        return;
      }

      const converter = new showdown.Converter({
        tables: true,
        strikethrough: true,
        tasklists: true
      });

      const menu = document.getElementById("sidebarMenu");
      const content = document.getElementById("contentArea");

      function clearActive() {
        menu.querySelectorAll("a.active").forEach(a => a.classList.remove("active"));
      }

      function setActiveLink(a) {
        clearActive();
        if (a) a.classList.add("active");
      }

      async function loadMarkdown(mdPath, activeLink) {
        try {
          console.log("Loading markdown:", mdPath);

          const res = await fetch(mdPath, { cache: "no-store" });
          if (!res.ok) {
            const txt = await res.text().catch(() => "");
            throw new Error(`HTTP ${res.status} ${res.statusText}. Body starts: ${txt.slice(0,120)}`);
          }

          const md = await res.text();
          content.innerHTML = converter.makeHtml(md);
          setActiveLink(activeLink);

          content.scrollTop = 0;
          window.scrollTo(0, 0);
        } catch (err) {
          console.error("Markdown load error:", err);
          content.innerHTML =
            "<h2>Failed to load content</h2>" +
            "<p>Open DevTools → Console to see the exact error and the URL being fetched.</p>";
        }
      }

      menu.addEventListener("click", (e) => {
        const a = e.target.closest("a");
        if (!a) return;

        const topExpandable = a.closest("li.expandable");
        const isSectionTitle = a.classList.contains("section-title");

        if (topExpandable && isSectionTitle) {
          e.preventDefault();
          topExpandable.classList.toggle("expanded");
          return;
        }

        const mdPath = a.getAttribute("data-md");
        if (mdPath) {
          e.preventDefault();
          loadMarkdown(mdPath, a);
          return;
        }

        e.preventDefault();
      });

      const firstMdLink = menu.querySelector("a[data-md]");
      if (firstMdLink) {
        loadMarkdown(firstMdLink.getAttribute("data-md"), firstMdLink);
      } else {
        content.innerHTML = "<h2>No articles found</h2>";
      }
    });
  </script>
</body>
</html>